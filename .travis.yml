language: generic

matrix:
  include:
    - language: groovy
      jdk: oraclejdk7
    - language: groovy
      jdk: openjdk7
    - language: objective-c # This forces an OS X build!
      osx_image: xcode6.4

branches:
  only:
    - master
    - /^release.*$/
    - /^v[0-9].*$/

# TODO: Multi-os in beta, requires approval from Travis.
#os:
#  - linux
#  - osx

# We can be run in a container for improved performance.
sudo: false

# If these steps fail, the build is 'errored' - i.e. misconfigured.
# This can fail if we cannot download Gradle 2.4 or the libraries
# we depend on.
install: 
  - ./gradlew wrapper
  - ./gradlew dependencies

# If these steps fail, the build is 'failed' - i.e. we have a code defect.
# We compile (assemble) and then build (which also tests) to capture build
# and test failures separately.
script:
  - ./gradlew assemble
  - ./gradlew build
